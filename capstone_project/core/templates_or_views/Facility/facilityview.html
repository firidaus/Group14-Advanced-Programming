{% extends 'base.html' %}
{% block content %}
<div class="flex items-center justify-between mb-4">
  <h1 class="text-2xl font-bold">Facilities</h1>
  <a href="{% url 'core:facility_create' %}" class="bg-indigo-700 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
    <i class="bi bi-plus-lg"></i> New Facility
  </a>
</div>

<!-- Filter Form -->
<form method="get" class="flex space-x-4 mb-4">
  <select name="type" class="border rounded p-2">
    <option value="">All Types</option>
    {% for t in facility_types %}
      <option value="{{ t }}" {% if request.GET.type == t %}selected{% endif %}>{{ t }}</option>
    {% endfor %}
  </select>

  <select name="partner" class="border rounded p-2">
    <option value="">All Partners</option>
    {% for p in partners %}
      <option value="{{ p }}" {% if request.GET.partner == p %}selected{% endif %}>{{ p }}</option>
    {% endfor %}
  </select>

  <input type="text" name="capability" placeholder="Capability" value="{{ request.GET.capability }}"
         class="border rounded p-2" />

  <button type="submit" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">
    Filter
  </button>
</form>

<!-- Facility Table -->

<table class="min-w-full border divide-y divide-gray-200">
  <thead class="bg-gray-50">
    <tr>
      <th class="px-4 py-2 text-left">Name</th>
      <th class="px-4 py-2 text-left">Type</th>
      <th class="px-4 py-2 text-left">Partner</th>
      <th class="px-4 py-2 text-left">Location</th>
      <th class="px-4 py-2 text-left">Capabilities</th>
       <th class="px-4 py-2 text-left">Description</th>
      <th class="px-4 py-2 text-center">Actions</th>
    </tr>
  </thead>
  <tbody class="bg-white divide-y divide-gray-200">
    {% for facility in facilities %}
    <tr>
      <td class="px-4 py-2">{{ facility.name }}</td>
      <td class="px-4 py-2">{{ facility.facility_type }}</td>
      <td class="px-4 py-2">{{ facility.partner }}</td>
      <td class="px-4 py-2">{{ facility.location }}</td>
      <td class="px-4 py-2">{{ facility.capabilities }}</td>
      <td class="px-4 py-2">{{ facility.description }}</td>
      <td class="px-4 py-2 text-center space-x-2">
        <a href="{% url 'core:facility_detail' facility.pk %}" class="text-blue-600 hover:text-blue-800"><i class="bi bi-eye"></i></a>
        <a href="{% url 'core:facility_update' facility.pk %}" class="text-blue-600 hover:text-blue-800"><i class="bi bi-pencil"></i></a>
        <a href="{% url 'core:facility_delete' facility.pk %}" class="text-red-600 hover:text-red-800"><i class="bi bi-trash"></i></a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="6" class="px-4 py-2 text-gray-500 text-center">No facilities found.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}